{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f6e302a979385f4f05fb","webpack:///external {\"commonjs\":\"experiment-js\",\"commonjs2\":\"experiment-js\",\"amd\":\"experiment-js\",\"root\":\"experiment\"}","webpack:///external {\"commonjs\":\"experiment-babylon-js\",\"commonjs2\":\"experiment-babylon-js\",\"amd\":\"experiment-babylon-js\",\"root\":\"BABYLON\"}","webpack:///external {\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\",\"root\":\"_\"}","webpack:///./src/startup/startup.js","webpack:///./builder.js","webpack:///./src/scenes/main/MainScene.js","webpack:///./src/scenes/main/functions/globalFunctions.js","webpack:///./src/scenes/main/states/running.js","webpack:///./src/scenes/main/states/tutorial.js","webpack:///external {\"commonjs\":\"jQuery\",\"commonjs2\":\"jQuery\",\"amd\":\"jQuery\",\"root\":\"jQuery\"}"],"names":["window","taskObject","calibrator","defferedDomLoaded","document","addEventListener","resolve","scripts","getElementsByTagName","length","assetsFolderFullpath","src","delimiterIndices","indicesOf","substr","R","p1","promise","p2","addFiles","imageToPreload","p3","preloadedImages","Object","assign","loadingPromise","Promise","all","then","assetsToLoad","adventurer","registerSceneGenerator","sceneNames","parametersNames","parametersConstraints","currentScene","startTask","message","paramBox","bind","queryString","require","MainScene","options","optionsBase","sceneKey","canvasBackground","Color4","backgroundRoundRadius","clearColor","canvasPercentWidth","canvasPercentHeight","mode","extend","scene","create2DScene","stateManager","canvas","initialCanvas","onResize","adventurerTexture","cloneAssetIntoScene","get","hasAlpha","Sprite2D","parent","id","x","y","spriteSize","Size","spriteLocation","Vector2","timerId","setInterval","isDisposed","clearInterval","spriteFrame","opacity","set","register","dataManager","dataFields","addTable","eventFields","setGlobal","indexOnTransitionSequence","indexOnPredictionSequence","fullSequenceIndex","add","states","running","tutorial","flags","levelDefined","events","goNextPosition","screenWentBlack","playPredictionSound","playObservationSound","showModal","goToTutorial","restartTutorial","addState","states_tutorial","states_running","tutorialState","runningState","pauseState","pause","selectLevel","elements2D","GUI","levelVisible","eventButtonTutorialOne","events_goToTutorial","timeInMs","width","height","widthOffset","buttonOptionLevelOne","text","marginAlignment","margin","rightPixels","topPixels","fill","Canvas2D","GetSolidColorBrush","callbackFunction","fontName","baseOpacity","hoverOpacity","buttonOptionTutorialOne","clone","bottomPixels","clickEventData","buttons","levelButtons","constructor","Rectangle2D","button","active","addAwakeningFunctions","addEventFunctions","data","goToState","events_goNextPosition","events_click","events_modalDismissed","events_showModal","setPauseKeyStroke","addEndingFunctions","addButton","Error","baseOptions","zOrder","fontSignedDistanceField","padding","leftPixels","buttonOptions","roundRadius","children","Text2D","marginVAlignment","marginHAlignment","buttonRect","pointerEventObservable","PrimitivePointerInfo","PointerOver","PointerOut","happenedAt","addEvent","PointerUp","disposeOfButtons","i","dispose","startRunning","nextTransitionTime","nextTransitionEvent","belongsTo","handledAt","storedAt","addTimeTriggerEvent","goToNextPosition","random","renderSize","checkForClickPrediction","event","clientY","clickVector","engineX","engineY","canvasPosition","actualPosition","isAOverB","positionA","positionB","sizeB","DistanceSquared","lengthSquared","sizeVector","scaleInPlace","newEvent","intro","title","en","content","disclaimer","trialInstruction","tutorials","pageOrderTutorialOne","awakeTutorial","call","showIntro","page","currentModal","modalBox","destroy","e","hasOwnProperty","modal","type","showNextPage","currentPage","pageOrder","currentIndex","indexOf","showEvent"],"mappings":"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","file":"task.max.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"experiment-js\"), require(\"experiment-babylon-js\"), require(\"lodash\"), require(\"jQuery\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"task\", [\"experiment-js\", \"experiment-babylon-js\", \"lodash\", \"jQuery\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"task\"] = factory(require(\"experiment-js\"), require(\"experiment-babylon-js\"), require(\"lodash\"), require(\"jQuery\"));\n\telse\n\t\troot[\"task\"] = factory(root[\"experiment\"], root[\"BABYLON\"], root[\"_\"], root[\"jQuery\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_9__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f6e302a979385f4f05fb","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"experiment-js\",\"commonjs2\":\"experiment-js\",\"amd\":\"experiment-js\",\"root\":\"experiment\"}\n// module id = 0\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"experiment-babylon-js\",\"commonjs2\":\"experiment-babylon-js\",\"amd\":\"experiment-babylon-js\",\"root\":\"BABYLON\"}\n// module id = 1\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\",\"root\":\"_\"}\n// module id = 2\n// module chunks = 0","/**\n * startUp.js\n *\n * This file holds the code that should run on your HTML page after all the framework and page is loaded.\n *\n * Here you should :\n * - create the taskObject\n * - set up the parameters of the task\n * - register loading promise\n * - register the scenes generators\n * - start the task\n * - bind the task paramBox with relevant parameters\n *\n * Do not pollute the global space with too much variables.\n * Here two global variables are created : taskObject and calibrator.\n */\nimport $ from 'jquery'\nimport { RessourceManager, TaskObject, Deferred, debuglog, preloadImages } from 'experiment-js'\n// import { SmartForm } from 'experiment-boxes'\n\nimport MainScene from '../scenes/main/MainScene'\n\nwindow.taskObject = null\nwindow.calibrator = null\n\n\n/* --- Example of a relatively complex preload --- */\n// When page is loaded, initiate the task\nconst defferedDomLoaded = new Deferred()\ndocument.addEventListener('DOMContentLoaded', () => {\n  defferedDomLoaded.resolve()\n})\n\nif (typeof window !== 'undefined') {\n  /* === Get the absolute path of the library === */\n  const scripts = document.getElementsByTagName('script')\n  if (scripts.length) {\n    const assetsFolderFullpath = scripts[scripts.length - 1].src\n    const delimiterIndices = assetsFolderFullpath.indicesOf('/')\n    window.assetsFolderFullpath = assetsFolderFullpath.substr(0, delimiterIndices[delimiterIndices.length - 2])\n  } else {\n    window.assetsFolderFullpath = './'\n  }\n}\n\nconst R = new RessourceManager()\nwindow.p1 = defferedDomLoaded.promise\nwindow.p2 = R.addFiles(`${window.assetsFolderFullpath}/assets/json/ressources.json`)\n\nconst imageToPreload = ['/assets/sprites/cross/squareSheetMargin.svg']\nconst [p3, preloadedImages] = preloadImages(...imageToPreload)\nObject.assign(window, { p3, preloadedImages })\n\n\nwindow.loadingPromise = Promise.all([window.p1, window.p2, window.p3])\n\n/* --- Once every promise is resolved sart seting up the task--- */\nwindow.loadingPromise.then(() => {\n  /* --- Creates the task object into the container --- */\n  const taskObject = new TaskObject($('.task-canvas'))\n\n    /* --- Register loading scene generator --- */\n  // taskObject.registerLoadingFunction(LoadingScene): here we do not use the custom loading scene generator\n  taskObject.assetsToLoad = {\n    adventurer: '/assets/sprites/adventurer/player.png',\n  }\n\n\n    /* --- Register scene generators --- */\n    // You register the function defined in the scene/main/\n    // which will be called by the taskobject after loading the assets\n  taskObject.registerSceneGenerator(MainScene)\n\n  const sceneNames = ['loading', 'main']\n\n  /* --- ParamBox --- */\n    /* list of tweakable variables for the paramBox */\n  const parametersNames = ['currentScene']\n\n  const parametersConstraints = { currentScene: sceneNames }\n\n  /* --- Start the task --- */\n  taskObject.startTask()\n  .then((message) => {\n    debuglog(message)\n    taskObject.paramBox.bind(taskObject, parametersNames, parametersConstraints)\n\n    if ((sceneNames.length === 1) || (typeof taskObject.paramBox.queryString.currentScene === 'undefined')) {\n      taskObject.currentScene = 'main'\n    }\n  })\n\n\n  window.taskObject = taskObject\n\n  /* --- Login --- */\n  /*\n  If you have php and mysql installed on your local server you can try that\n\n  const tempMaxNumberOfRetry = taskObject.dataManager.MAX_NUMBER_OF_RETRY\n  const endpoint = `${window.assetsFolderFullpath}/node_modules/experiment-apis/api/php/mysql/index.php`\n\n  /**\n   * This function in a form generator that is called automatically by the DataManager when the user needs to login\n   * @method loginForm\n   * @return {SmartForm}  a SmartForm\n   */\n  /*\n  function loginForm() {\n    const fields = {\n      userId: {\n        type: 'input',\n        constraints: 'alpha; length:10,300', // list of constraints that will be automatically verified: mandatory; alpha; numeric; length:XX; contains:a,b,@,.;\n        authorizedValues: null, // athorized values\n        parent: null,\n        title: 'Enter your MTurk UserId:',\n      },\n      password: {\n        type: 'password', // field type: input, select, textaera, slider, radio, password\n        constraints: 'length:6,300; score: 50', // list of constraints that will be automatically verified: mandatory; alpha; numeric; length:XX; contains:a,b,@,.;\n        authorizedValues: null, // athorized values\n        parent: null,\n        title: 'Enter your password, if you are new here you are free to pick one !', // you can control auto-create account in the php api config\n      },\n    }\n    const options = { fields, title: 'Login Form', format: 'topCentralSmall', callback(fields) { debuglog({ endpoint, credentials: { userId: fields.userId.value, password: fields.password.value } }) } }\n    const form = new SmartForm(options)\n    form.buttonText = 'OK'\n    return form\n  }\n\n  //  If you do not want to store the credentials for the connections localy set this variable to false (the password is not stored in any case, only a logging key)\n  // taskObject.dataManager.useLocalStorageCredentials = false\n  taskObject.setConnection({ endpoint, signInForm: loginForm }) // credentials: { userId: 'John', password: 'wrong' } })\n  .then(connection => (connection.loggedIn ? true : taskObject.dataManager.login(connection)))\n  .then(() => {\n    // reset the retry limit to its original value\n    taskObject.dataManager.MAX_NUMBER_OF_RETRY = tempMaxNumberOfRetry\n\n    /* --- Start task --- */\n  //   return taskObject.startTask()\n  // })\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/startup/startup.js","/**\n * Experiment.js\n * Created. 2016\n *\n * Experiment.js toolbox.\n *\n * Authors. Albert Buchard\n *\n * Requires: lodash, BABYLON.js, mathjs, jQuery\n *\n * LICENSE Apache-2\n */\n\n /* --- Import the framework --- */\n\n\n/* add it to the global space in case user want to import in a script tag */\n if (typeof window !== 'undefined') {\n   require('./src/startup/startup')\n }\n\n\n\n// WEBPACK FOOTER //\n// ./builder.js","import _ from 'lodash'\nimport BABYLON from 'experiment-babylon-js'\nimport {\n  EventData,\n  Array, // eslint-disable-line\n  String, // eslint-disable-line\n  debuglog,\n} from 'experiment-js'\n\n\nimport { awakeTutorial, showModal, showNextPage } from './states/tutorial'\n\nimport {\n  startRunning,\n  goToNextPosition,\n  checkForClickPrediction,\n} from './states/running'\n\nimport {\n  drawTiles,\n  addButton,\n  disposeOfButtons,\n} from './functions/globalFunctions'\n\n/* =============== Main scene =============== */\nexport default function MainScene(options = {}) {\n  // option base\n  const optionsBase = {\n    sceneKey: 'main',\n    canvasBackground: new BABYLON.Color4(0, 0, 0, 1),\n    backgroundRoundRadius: 0,\n    clearColor: new BABYLON.Color4(0, 0, 0, 1),\n    canvasPercentWidth: 1,\n    canvasPercentHeight: 1,\n    mode: 'central',\n  }\n\n  options = _.extend(optionsBase, options)\n\n  /* --- Get taskObject from context --- */\n  const taskObject = this.taskObject\n\n  /* --- Create a basic 2D scene using a Canvas2D as background --- */\n  const scene = taskObject.create2DScene(options)\n\n  /* --- Get stateManager --- */\n  const stateManager = scene.stateManager\n\n  /* --- Get canvas --- */\n  const canvas = scene.initialCanvas\n\n  const R = taskObject.R\n\n  scene.onResize = [function () { debuglog('scene.onResize: this is a custom function to be called on resize events') }]\n\n  /* --- Load assets --- */\n  // const sounds = {\n  //   observation: taskObject.cloneAssetIntoScene(R.get.sounds_observation, scene),\n  //   prediction: taskObject.cloneAssetIntoScene(R.get.sounds_predict, scene),\n  // }\n  // stateManager.setGlobal('sounds', sounds)\n\n\n  const adventurerTexture = taskObject.cloneAssetIntoScene(R.get.adventurer, scene)\n  adventurerTexture.hasAlpha = true\n\n  const adventurer = new BABYLON.Sprite2D(adventurerTexture, {\n    parent: canvas,\n    id: 'adventurer',\n    x: 100,\n    y: 100,\n    spriteSize: new BABYLON.Size(64, 64),\n    spriteLocation: new BABYLON.Vector2(0, 128),\n  })\n\n\n  const timerId = setInterval(() => {\n    if (canvas.isDisposed) {\n      clearInterval(timerId)\n      return\n    }\n    if (adventurer.spriteFrame === 21) {\n      adventurer.spriteFrame = 0\n    } else {\n      adventurer.spriteFrame += 1\n    }\n  }, 40)\n\n  adventurer.opacity = 0\n\n\n  /* --- Set some global variables --- */\n  // store in the stateManager a reference to the adventurer\n  stateManager.set('elements2D', { adventurer, canvas })\n\n  /* --- Register some global functions --- */\n  stateManager.register(addButton,\n    disposeOfButtons)\n\n  /* --- Setup data --- */\n  const dataManager = this.dataManager\n\n  /* --- Add mainSceneData table that will hold your scene data --- */\n  const dataFields = [\n    'id',\n    'subject_id',\n    'level',\n    'block',\n  ]\n\n  dataManager.addTable('mainSceneData', dataFields)\n\n  /* --- Add the logs for each level --- */\n  const eventFields = ['id', 'flag', 'happenedAt', 'handledAt', 'data']\n  dataManager.addTable('mainSceneEvents', eventFields)\n\n  /* --- Store scene level inside the stateManager --- */\n  stateManager.setGlobal('positionData', {\n    indexOnTransitionSequence: -1,\n    indexOnPredictionSequence: -1,\n    fullSequenceIndex: -1,\n  })\n\n  stateManager.setGlobal('hasSeenLearningInfo', false)\n  stateManager.setGlobal('hasSeenPredictionInfo', false)\n  /* --- Setup states --- */\n\n  /* --- Set state key and store them in the stateManager --- */\n  R.add({\n    states: {\n      running: 'running',\n      tutorial: 'tutorial',\n    },\n    flags: {\n      levelDefined: 'levelDefined',\n    },\n    events: {\n      goNextPosition: 'goNextPosition',\n      screenWentBlack: 'screenWentBlack',\n      playPredictionSound: 'playPredictionSound',\n      playObservationSound: 'playObservationSound',\n      showModal: 'showModal',\n      goToTutorial: 'goToTutorial',\n      restartTutorial: 'restartTutorial',\n    },\n  })\n\n  /* --- Create the states --- */\n  // eslint-disable-next-line\n  const [tutorialState, runningState] = stateManager.addState(R.get.states_tutorial, R.get.states_running)\n  const pauseState = stateManager.states.pause\n\n  /* ======== State Active ======== */\n  const selectLevel = function () {\n    const stateManager = this.stateManager\n    const elements2D = stateManager.get('elements2D')\n    const GUI = stateManager.get('GUI') // this is a cavas on top of the main canvas that is made ot hold buttons, tooltips etc.\n\n    GUI.levelVisible = true\n    /* --- Delete buttons --- */\n    stateManager.promise('disposeOfButtons')\n\n    const eventButtonTutorialOne = new EventData(R.get.events_goToTutorial, stateManager.timeInMs, {\n      tutorial: 1,\n    })\n\n    const width = 220\n    const height = 40\n    const widthOffset = width / 2\n\n    const buttonOptionLevelOne = {\n      id: 'levelOne',\n      parent: GUI,\n      text: 'Level 1',\n      marginAlignment: 'h: center, v: bottom',\n      margin: {\n        rightPixels: (width) + widthOffset,\n        topPixels: 0,\n      },\n      width,\n      height,\n      fill: BABYLON.Canvas2D.GetSolidColorBrush(new BABYLON.Color4(0.8, 0.8, 0.8, 1)),\n      callbackFunction: null,\n      fontName: '20pt Arial',\n      baseOpacity: 0.8,\n      hoverOpacity: 1,\n    }\n\n    const buttonOptionTutorialOne = _.extend(_.clone(buttonOptionLevelOne), {\n      id: 'buttonTutorialLevelFour',\n      text: 'Tutorial 1',\n      margin: {\n        rightPixels: (width) + widthOffset,\n        bottomPixels: height,\n      },\n      clickEventData: eventButtonTutorialOne,\n    })\n\n\n    return stateManager.promise('addButton', buttonOptionTutorialOne)\n      .then((buttons) => {\n        elements2D.levelButtons = buttons\n        if (buttons.constructor === BABYLON.Rectangle2D) { buttons = [buttons] }\n        for (const button of buttons) {\n          button.levelVisible = true\n        }\n        return 'stateManager.selectLevel: resolved'\n      })\n  }\n\n  stateManager.states.active.addAwakeningFunctions(selectLevel)\n\n  stateManager.states.active.addEventFunctions(R.get.events_goToTutorial,\n    ({ data: { tutorial } }) => {\n      stateManager.setGlobal('currentTutorial', tutorial)\n      stateManager.goToState(R.get.states_tutorial)\n    })\n\n  /* ======== State RUNNING ======== */\n\n  /* --- Register functions --- */\n  runningState.addAwakeningFunctions(startRunning)\n\n  runningState.addEventFunctions(R.get.events_goNextPosition, goToNextPosition)\n  runningState.addEventFunctions(R.get.events_click, checkForClickPrediction)\n\n  /* ======= State Tutorial ======= */\n  tutorialState.addAwakeningFunctions(awakeTutorial)\n\n  tutorialState.addEventFunctions(R.get.events_modalDismissed, showNextPage)\n  tutorialState.addEventFunctions(R.get.events_showModal, showModal)\n\n\n  /* ======== State Pause ======== */\n  stateManager.setPauseKeyStroke()\n  pauseState.addAwakeningFunctions(selectLevel)\n  pauseState.addEndingFunctions(function () { this.stateManager.promise('disposeOfButtons') })\n\n\n  return scene\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scenes/main/MainScene.js","import _ from 'lodash'\nimport BABYLON from 'experiment-babylon-js'\nimport {\n  EventData,\n  Array,\n  String, // eslint-disable-line\n} from 'experiment-js'\n\n\n/* --- Setup stateManager functions --- */\n\nconst addButton = function (options = null) {\n  if (typeof this.taskObject === 'undefined') {\n    throw new Error('stateManager.addButton: this.taskObject is undefined')\n  }\n\n  const stateManager = this.stateManager\n  const canvas = stateManager.get('elements2D').canvas\n\n  const baseOptions = {\n    id: `button${stateManager.timeInMs}`,\n    text: 'text',\n    x: 50,\n    y: 50,\n    width: 100,\n    height: 50,\n    fill: BABYLON.Canvas2D.GetSolidColorBrush(new BABYLON.Color4(0.8, 0.8, 0.8, 1)),\n    clickEventData: null,\n    fontName: '30pt Arial',\n    baseOpacity: 0.8,\n    hoverOpacity: 1,\n    zOrder: -0.5,\n    marginAlignment: null,\n    fontSignedDistanceField: true,\n    margin: {},\n    padding: {},\n    parent: canvas,\n  }\n\n  baseOptions.margin.leftPixels = 0\n  baseOptions.margin.rightPixels = 0\n  baseOptions.margin.topPixels = 0\n  baseOptions.margin.bottomPixels = 0\n  baseOptions.padding.leftPixels = 0\n  baseOptions.padding.rightPixels = 0\n  baseOptions.padding.topPixels = 0\n  baseOptions.padding.bottomPixels = 0\n  baseOptions.margin = _.extend(baseOptions.margin, options.margin)\n  baseOptions.padding = _.extend(baseOptions.padding, options.padding)\n  options.margin = baseOptions.margin\n  options.padding = baseOptions.padding\n\n  // extend options\n  options = _.extend(baseOptions, options)\n\n  let buttonOptions = {}\n  let margin = {}\n  let padding = {}\n  if (options.marginAlignment === null) {\n    buttonOptions = {\n      parent: options.parent,\n      id: options.id,\n      x: options.x,\n      y: options.y,\n      width: options.width,\n      height: options.height,\n      fill: options.fill,\n      zOrder: options.zOrder,\n      roundRadius: 0,\n      children: [new BABYLON.Text2D(options.text, {\n        fontName: options.fontName,\n        marginVAlignment: 'v: center',\n        fontSignedDistanceField: options.fontSignedDistanceField,\n        marginHAlignment: 3,\n      })],\n    }\n  } else {\n    buttonOptions = {\n      parent: options.parent,\n      id: options.id,\n      width: options.width,\n      height: options.height,\n      fill: options.fill,\n      zOrder: options.zOrder,\n      marginAlignment: options.marginAlignment,\n      roundRadius: 0,\n      children: [new BABYLON.Text2D(options.text, {\n        fontName: options.fontName,\n        marginVAlignment: 'v: center',\n        fontSignedDistanceField: options.fontSignedDistanceField,\n        marginHAlignment: 3,\n      })],\n    }\n    margin = options.margin\n    padding = options.padding\n  }\n\n  // create button and add to canvas\n  const buttonRect = new BABYLON.Rectangle2D(buttonOptions)\n\n  buttonRect.opacity = options.baseOpacity\n\n  if (margin !== null) {\n    buttonRect.margin.rightPixels = options.margin.rightPixels // TODO make that a specific function in the framework\n    buttonRect.margin.leftPixels = options.margin.leftPixels\n    buttonRect.margin.topPixels = options.margin.topPixels\n    buttonRect.margin.bottomPixels = options.margin.bottomPixels\n  }\n\n  if (padding !== null) {\n    buttonRect.padding.rightPixels = padding.rightPixels\n    buttonRect.padding.leftPixels = padding.leftPixels\n    buttonRect.padding.topPixels = padding.topPixels\n    buttonRect.padding.bottomPixels = padding.bottomPixels\n  }\n\n  // Add an observable for hovering\n  buttonRect.pointerEventObservable.add(() => {\n    buttonRect.opacity = options.hoverOpacity\n  }, BABYLON.PrimitivePointerInfo.PointerOver)\n\n  buttonRect.pointerEventObservable.add(() => {\n    buttonRect.opacity = options.baseOpacity\n  }, BABYLON.PrimitivePointerInfo.PointerOut)\n\n  // Add an observable for clicking\n  if ((options.clickEventData !== null) && (options.clickEventData.constructor === EventData)) {\n    buttonRect.pointerEventObservable.add(() => {\n      options.clickEventData.happenedAt = stateManager.timeInMs\n\n\n      stateManager.addEvent(options.clickEventData)\n    }, BABYLON.PrimitivePointerInfo.PointerUp)\n  }\n\n  return (buttonRect)\n}\n\nconst disposeOfButtons = function () {\n  const elements2D = this.stateManager.get('elements2D')\n\n  if (typeof elements2D.levelButtons !== 'undefined') {\n    if (elements2D.levelButtons.constructor === BABYLON.Rectangle2D) { elements2D.levelButtons = [elements2D.levelButtons] }\n    if (elements2D.levelButtons.constructor === Array) {\n      for (let i = 0; i < elements2D.levelButtons.length; i++) {\n        elements2D.levelButtons[i].dispose()\n      }\n      elements2D.levelButtons = []\n    }\n  }\n\n  return ('disposeOfButtons: buttons disposed.')\n}\n\nexport {\n  addButton,\n  disposeOfButtons }\n\n\n\n// WEBPACK FOOTER //\n// ./src/scenes/main/functions/globalFunctions.js","import _ from 'lodash'\nimport BABYLON from 'experiment-babylon-js'\nimport {\n  EventData,\n  Array, // eslint-disable-line\n  String, // eslint-disable-line\n  mandatory,\n  debugError,\n} from 'experiment-js'\n\n  /* --- State function --- */\n\nconst startRunning = function () {\n  // in those functions called by the stateManager :\n  // this = taskObject.context\n  // You can access all the relevant object with this.(taskObject, scene, stateManager, state, R)\n  const stateManager = this.stateManager\n  const R = stateManager.R\n\n  /* --- Store the data --- */\n  // Prepare the first 'goToNextPosition' event\n  const nextTransitionTime = this.stateManager.timeInMs + 100 // this event will fire at a later time\n  const nextTransitionEvent = new EventData(R.get.events_goNextPosition, nextTransitionTime, {\n    belongsTo: ['globalLog'], // tables to store the event in\n    handledAt: null,\n    storedAt: null,\n  })\n\n  // Add the future event to the pile of time triggered event\n  stateManager.addTimeTriggerEvent(nextTransitionEvent)\n\n  return ('state.startRunning: resolved')\n}\n\nconst goToNextPosition = function () {\n  const stateManager = this.stateManager\n  const elements2D = stateManager.get('elements2D')\n\n  elements2D.adventurer.opacity = 1\n\n  elements2D.adventurer.x = _.random(50, this.taskObject.renderSize.width)\n  elements2D.adventurer.y = _.random(50, this.taskObject.renderSize.height)\n\n  return 'Changed position'\n}\n\n\nconst checkForClickPrediction = function (event = mandatory()) {\n  if (typeof event.data.clientY === 'undefined') {\n    debugError('state.checkForClickPrediction: event.data.clientY is undefined.')\n    return null\n  }\n\n  const stateManager = this.stateManager\n  const clickVector = new BABYLON.Vector2(event.data.engineX, event.data.engineY)\n\n  const elements2D = stateManager.get('elements2D')\n  const canvasPosition = elements2D.canvas.actualPosition\n\n  const isAOverB = function (positionA, positionB, sizeB) {\n    if (BABYLON.Vector2.DistanceSquared(positionA, positionB) < sizeB.lengthSquared()) {\n      return true\n    }\n    return false\n  }\n\n  const adventurer = elements2D.adventurer\n    // var sizeVector = (new BABYLON.Vector2(agent.size.width, agent.size.height)).scaleInPlace(agent.scale);\n  const sizeVector = new BABYLON.Vector2(adventurer.width, adventurer.height)\n  sizeVector.scaleInPlace(0.5)\n\n  if (isAOverB(clickVector, ((adventurer.actualPosition).add(sizeVector)).add(canvasPosition), sizeVector)) {\n    // Add an immediate event to the pile of event that will be treated at the next update\n    stateManager.newEvent(this.R.get.events_goNextPosition)\n  }\n  return 'checkForClickPrediction resolved'\n}\n\nexport {\n  startRunning,\n  goToNextPosition,\n  checkForClickPrediction,\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scenes/main/states/running.js","import {\n  EventData,\n  Array, // eslint-disable-line\n  String, // eslint-disable-line\n  delay, debugWarn, debuglog, debugError,\n} from 'experiment-js'\n\n\n// You are not forced to use the Ressourcemanager or the state globals\nconst intro = {\n  title: { en: 'This is the tutorial state' },\n  content: {\n    en: `\n    <h5>Welcome ! üëãüèΩ üòÑ </h5>\n    This is a SmartModal, from the experiment-boxes module. Shift+P would show you the ParamBox<br>\n    If you click the button below, an \"modal_dismissed\" event will fire and trigger the next modal to appear<br><br>`,\n  },\n}\n\nconst disclaimer = {\n  title: { en: 'üò¨' },\n  content: {\n    en: `How fun is that !<br>\n  Let's do another one ‚úåüèΩüòâ `,\n  },\n}\n\nconst trialInstruction = {\n  title: { en: 'There is no small examples' },\n  content: { en: `<h5>Time to act</h5>\n    Try clicking on the little adventurer !\n    <br>` },\n}\nconst tutorials = {\n  disclaimer,\n  intro,\n  trialInstruction,\n}\n\nconst pageOrderTutorialOne = ['intro', 'disclaimer', 'trialInstruction']\n\nconst awakeTutorial = function () {\n  this.stateManager.set('currentPage', 'intro')\n  this.stateManager.call('disposeOfButtons')\n  const showIntro = new EventData(this.R.get.events_showModal, this.stateManager.timeInMs + 100, { page: 'intro' })\n  this.stateManager.addTimeTriggerEvent(showIntro)\n}\n\nconst showModal = function ({ data: { page = 'intro' } }) {\n  if (this.taskObject.currentModal !== null) {\n    try {\n      this.taskObject.currentModal.modalBox.destroy()\n    } catch (e) {\n      debugWarn(e)\n    }\n  }\n\n  // Sometimes modals and divs need some time to place themselves in the DOM, those short delay allow for it\n  // TODO hopefully this will get fixed in future version\n  delay(50).then(() => {\n    if (tutorials.hasOwnProperty(page)) {\n      const tutorial = tutorials[page]\n      const event = new EventData(this.R.get.events_modalDismissed, { page })\n      this.taskObject.modal({ type: 'centralLarge', title: tutorial.title.en, content: tutorial.content.en, event })\n    }\n  })\n}\n\nconst showNextPage = function ({ data: { page: currentPage = this.stateManager.get('currentPage', 'intro') } }) {\n  const pageOrder = pageOrderTutorialOne\n\n  const currentIndex = pageOrder.indexOf(currentPage)\n  if (currentIndex !== -1) {\n    if (currentIndex !== pageOrder.length - 1) {\n      const showEvent = new EventData(this.R.get.events_showModal, { page: pageOrder[currentIndex + 1] })\n      this.stateManager.addEvent(showEvent)\n    } else {\n      debuglog('state.showNextPage: end of tutorial.')\n      this.stateManager.goToState(this.R.get.states_running, true)\n    }\n  } else {\n    debugError('state.showNextPage: invalid currentPage.')\n  }\n}\n\n\nexport {\nawakeTutorial,\nshowNextPage,\nshowModal }\n\n\n\n// WEBPACK FOOTER //\n// ./src/scenes/main/states/tutorial.js","module.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"jQuery\",\"commonjs2\":\"jQuery\",\"amd\":\"jQuery\",\"root\":\"jQuery\"}\n// module id = 9\n// module chunks = 0"],"sourceRoot":""}