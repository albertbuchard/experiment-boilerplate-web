{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap d51e9cdd8d9107d595fc","webpack:///external {\"commonjs\":\"experiment-js\",\"commonjs2\":\"experiment-js\",\"amd\":\"experiment-js\",\"root\":\"experiment\"}","webpack:///external {\"commonjs\":\"experiment-babylon-js\",\"commonjs2\":\"experiment-babylon-js\",\"amd\":\"experiment-babylon-js\",\"root\":\"BABYLON\"}","webpack:///external {\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\",\"root\":\"_\"}","webpack:///./src/startup/startup.js","webpack:///./builder.js","webpack:///./src/scenes/main/MainScene.js","webpack:///./src/scenes/main/functions/globalFunctions.js","webpack:///./src/scenes/main/states/running.js","webpack:///./src/scenes/main/states/tutorial.js","webpack:///./src/scenes/threeD/ThreeDScene.js","webpack:///external {\"commonjs\":\"jQuery\",\"commonjs2\":\"jQuery\",\"amd\":\"jQuery\",\"root\":\"jQuery\"}"],"names":["window","taskObject","calibrator","defferedDomLoaded","document","addEventListener","resolve","scripts","getElementsByTagName","length","assetsFolderFullpath","src","delimiterIndices","indicesOf","substr","R","p1","promise","p2","addFiles","imageToPreload","p3","preloadedImages","Object","assign","loadingPromise","Promise","all","then","assetsToLoad","adventurer","registerSceneGenerator","sceneNames","parametersNames","parametersConstraints","currentScene","startTask","message","paramBox","bind","queryString","require","MainScene","options","optionsBase","sceneKey","canvasBackground","Color4","backgroundRoundRadius","clearColor","canvasPercentWidth","canvasPercentHeight","mode","extend","scene","create2DScene","stateManager","canvas","initialCanvas","onResize","adventurerTexture","cloneAssetIntoScene","get","hasAlpha","Sprite2D","parent","id","x","y","spriteSize","Size","spriteLocation","Vector2","timerId","setInterval","isDisposed","clearInterval","spriteFrame","opacity","set","register","dataManager","dataFields","addTable","eventFields","setGlobal","indexOnTransitionSequence","indexOnPredictionSequence","fullSequenceIndex","add","states","running","tutorial","flags","levelDefined","events","goNextPosition","screenWentBlack","playPredictionSound","playObservationSound","showModal","goToTutorial","restartTutorial","goTo3D","addState","states_tutorial","states_running","tutorialState","runningState","pauseState","pause","selectLevel","elements2D","GUI","levelVisible","eventButtonTutorialOne","events_goToTutorial","timeInMs","eventButton3D","events_goTo3D","width","height","widthOffset","buttonOptionLevelOne","text","marginAlignment","margin","rightPixels","topPixels","fill","Canvas2D","GetSolidColorBrush","callbackFunction","fontName","baseOpacity","hoverOpacity","clickEventData","buttonOptionTutorialOne","clone","bottomPixels","buttons","levelButtons","constructor","Rectangle2D","button","active","addAwakeningFunctions","addEventFunctions","data","goToState","events_goNextPosition","events_click","events_modalDismissed","events_showModal","setPauseKeyStroke","addEndingFunctions","addButton","Error","baseOptions","zOrder","fontSignedDistanceField","padding","leftPixels","buttonOptions","roundRadius","children","Text2D","marginVAlignment","marginHAlignment","buttonRect","pointerEventObservable","PrimitivePointerInfo","PointerOver","PointerOut","happenedAt","addEvent","PointerUp","disposeOfButtons","i","dispose","startRunning","nextTransitionTime","nextTransitionEvent","belongsTo","handledAt","storedAt","addTimeTriggerEvent","goToNextPosition","random","renderSize","checkForClickPrediction","event","clientY","clickVector","engineX","engineY","canvasPosition","actualPosition","isAOverB","positionA","positionB","sizeB","DistanceSquared","lengthSquared","sizeVector","scaleInPlace","newEvent","intro","title","en","content","disclaimer","trialInstruction","tutorials","pageOrderTutorialOne","awakeTutorial","call","showIntro","page","currentModal","modalBox","destroy","e","hasOwnProperty","modal","type","showNextPage","currentPage","pageOrder","currentIndex","indexOf","showEvent","ThreeDScene","Scene","engine","parentTaskObject","addStateManager","updateContentFrame","registerBeforeRender","update","camera","ArcRotateCamera","Vector3","setTarget","Zero","lowerRadiusLimit","upperRadiusLimit","upperBetaLimit","Math","PI","attachControl","initialCamera","light","PointLight","position","intensity","diffuse","Color3","specular","lightSphere","Mesh","CreateSphere","litMaterial","StandardMaterial","emissiveColor","FromInts","material","light0","light1","light2","light3","light4","light5","lightSphere0","lightSphere1","lightSphere2","lightSphere4","lightSphere5","diffuseColor","specularColor","sphere","sphere2","z","ground","CreateGround","shadowGenerator","ShadowGenerator","shadowMinZ","shadowMaxZ","depthScale","bias","getShadowMap","renderList","push","refreshRate","forceBackFacesOnly","shadowGenerator2","receiveShadows","matt","maxSimultaneousLights","specularPower","backFaceCulling","alpha","radiansFromCameraForShadows","beta","beforeRender","cos","sin","copyFrom"],"mappings":"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","file":"task.max.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"experiment-js\"), require(\"experiment-babylon-js\"), require(\"lodash\"), require(\"jQuery\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"task\", [\"experiment-js\", \"experiment-babylon-js\", \"lodash\", \"jQuery\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"task\"] = factory(require(\"experiment-js\"), require(\"experiment-babylon-js\"), require(\"lodash\"), require(\"jQuery\"));\n\telse\n\t\troot[\"task\"] = factory(root[\"experiment\"], root[\"BABYLON\"], root[\"_\"], root[\"jQuery\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_10__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d51e9cdd8d9107d595fc","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"experiment-js\",\"commonjs2\":\"experiment-js\",\"amd\":\"experiment-js\",\"root\":\"experiment\"}\n// module id = 0\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"experiment-babylon-js\",\"commonjs2\":\"experiment-babylon-js\",\"amd\":\"experiment-babylon-js\",\"root\":\"BABYLON\"}\n// module id = 1\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\",\"root\":\"_\"}\n// module id = 2\n// module chunks = 0","/**\n * startUp.js\n *\n * This file holds the code that should run on your HTML page after all the framework and page is loaded.\n *\n * Here you should :\n * - create the taskObject\n * - set up the parameters of the task\n * - register loading promise\n * - register the scenes generators\n * - start the task\n * - bind the task paramBox with relevant parameters\n *\n * Do not pollute the global space with too much variables.\n * Here two global variables are created : taskObject and calibrator.\n */\nimport $ from 'jquery'\nimport { RessourceManager, TaskObject, Deferred, debuglog, preloadImages } from 'experiment-js'\n// import { SmartForm } from 'experiment-boxes'\n\nimport MainScene from '../scenes/main/MainScene'\nimport ThreeDScene from '../scenes/threeD/ThreeDScene'\n\nwindow.taskObject = null\nwindow.calibrator = null\n\n\n/* --- Example of a relatively complex preload --- */\n// When page is loaded, initiate the task\nconst defferedDomLoaded = new Deferred()\ndocument.addEventListener('DOMContentLoaded', () => {\n  defferedDomLoaded.resolve()\n})\n\nif (typeof window !== 'undefined') {\n  /* === Get the absolute path of the library === */\n  const scripts = document.getElementsByTagName('script')\n  if (scripts.length) {\n    const assetsFolderFullpath = scripts[scripts.length - 1].src\n    const delimiterIndices = assetsFolderFullpath.indicesOf('/')\n    window.assetsFolderFullpath = assetsFolderFullpath.substr(0, delimiterIndices[delimiterIndices.length - 2])\n  } else {\n    window.assetsFolderFullpath = './'\n  }\n}\n\nconst R = new RessourceManager()\nwindow.p1 = defferedDomLoaded.promise\nwindow.p2 = R.addFiles(`${window.assetsFolderFullpath}/assets/json/ressources.json`)\n\nconst imageToPreload = ['/assets/sprites/cross/squareSheetMargin.svg']\nconst [p3, preloadedImages] = preloadImages(...imageToPreload)\nObject.assign(window, { p3, preloadedImages })\n\n\nwindow.loadingPromise = Promise.all([window.p1, window.p2, window.p3])\n\n/* --- Once every promise is resolved sart seting up the task--- */\nwindow.loadingPromise.then(() => {\n  /* --- Creates the task object into the container --- */\n  const taskObject = new TaskObject($('.task-canvas'))\n\n    /* --- Register loading scene generator --- */\n  // taskObject.registerLoadingFunction(LoadingScene): here we do not use the custom loading scene generator\n  taskObject.assetsToLoad = {\n    adventurer: '/assets/sprites/adventurer/player.png',\n  }\n\n\n    /* --- Register scene generators --- */\n    // You register the function defined in the scene/main/\n    // which will be called by the taskobject after loading the assets\n  taskObject.registerSceneGenerator(MainScene)\n  taskObject.registerSceneGenerator(ThreeDScene)\n\n\n  const sceneNames = ['loading', 'main', 'threeD']\n\n  /* --- ParamBox --- */\n    /* list of tweakable variables for the paramBox */\n  const parametersNames = ['currentScene']\n\n  const parametersConstraints = { currentScene: sceneNames }\n\n  /* --- Start the task --- */\n  taskObject.startTask()\n  .then((message) => {\n    debuglog(message)\n    taskObject.paramBox.bind(taskObject, parametersNames, parametersConstraints)\n\n    if ((sceneNames.length === 1) || (typeof taskObject.paramBox.queryString.currentScene === 'undefined')) {\n      taskObject.currentScene = 'main'\n    }\n  })\n\n\n  window.taskObject = taskObject\n\n  /* --- Login --- */\n  /*\n  If you have php and mysql installed on your local server you can try that\n\n  const tempMaxNumberOfRetry = taskObject.dataManager.MAX_NUMBER_OF_RETRY\n  const endpoint = `${window.assetsFolderFullpath}/node_modules/experiment-apis/api/php/mysql/index.php`\n\n  /**\n   * This function in a form generator that is called automatically by the DataManager when the user needs to login\n   * @method loginForm\n   * @return {SmartForm}  a SmartForm\n   */\n  /*\n  function loginForm() {\n    const fields = {\n      userId: {\n        type: 'input',\n        constraints: 'alpha; length:10,300', // list of constraints that will be automatically verified: mandatory; alpha; numeric; length:XX; contains:a,b,@,.;\n        authorizedValues: null, // athorized values\n        parent: null,\n        title: 'Enter your MTurk UserId:',\n      },\n      password: {\n        type: 'password', // field type: input, select, textaera, slider, radio, password\n        constraints: 'length:6,300; score: 50', // list of constraints that will be automatically verified: mandatory; alpha; numeric; length:XX; contains:a,b,@,.;\n        authorizedValues: null, // athorized values\n        parent: null,\n        title: 'Enter your password, if you are new here you are free to pick one !', // you can control auto-create account in the php api config\n      },\n    }\n    const options = { fields, title: 'Login Form', format: 'topCentralSmall', callback(fields) { debuglog({ endpoint, credentials: { userId: fields.userId.value, password: fields.password.value } }) } }\n    const form = new SmartForm(options)\n    form.buttonText = 'OK'\n    return form\n  }\n\n  //  If you do not want to store the credentials for the connections localy set this variable to false (the password is not stored in any case, only a logging key)\n  // taskObject.dataManager.useLocalStorageCredentials = false\n  taskObject.setConnection({ endpoint, signInForm: loginForm }) // credentials: { userId: 'John', password: 'wrong' } })\n  .then(connection => (connection.loggedIn ? true : taskObject.dataManager.login(connection)))\n  .then(() => {\n    // reset the retry limit to its original value\n    taskObject.dataManager.MAX_NUMBER_OF_RETRY = tempMaxNumberOfRetry\n\n    /* --- Start task --- */\n  //   return taskObject.startTask()\n  // })\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/startup/startup.js","/**\n * Experiment.js\n * Created. 2016\n *\n * Experiment.js toolbox.\n *\n * Authors. Albert Buchard\n *\n * Requires: lodash, BABYLON.js, mathjs, jQuery\n *\n * LICENSE Apache-2\n */\n\n /* --- Import the framework --- */\n\n\n/* add it to the global space in case user want to import in a script tag */\n if (typeof window !== 'undefined') {\n   require('./src/startup/startup')\n }\n\n\n\n// WEBPACK FOOTER //\n// ./builder.js","import _ from 'lodash'\nimport BABYLON from 'experiment-babylon-js'\nimport {\n  EventData,\n  Array, // eslint-disable-line\n  String, // eslint-disable-line\n  debuglog,\n} from 'experiment-js'\n\n\nimport { awakeTutorial, showModal, showNextPage } from './states/tutorial'\n\nimport {\n  startRunning,\n  goToNextPosition,\n  checkForClickPrediction,\n} from './states/running'\n\nimport {\n  addButton,\n  disposeOfButtons,\n} from './functions/globalFunctions'\n\n/* =============== Main scene =============== */\nexport default function MainScene(options = {}) {\n  // option base\n  const optionsBase = {\n    sceneKey: 'main',\n    canvasBackground: new BABYLON.Color4(0, 0, 0, 1),\n    backgroundRoundRadius: 0,\n    clearColor: new BABYLON.Color4(0, 0, 0, 1),\n    canvasPercentWidth: 1,\n    canvasPercentHeight: 1,\n    mode: 'central',\n  }\n\n  options = _.extend(optionsBase, options)\n\n  /* --- Get taskObject from context --- */\n  const taskObject = this.taskObject\n\n  /* --- Create a basic 2D scene using a Canvas2D as background --- */\n  const scene = taskObject.create2DScene(options)\n\n  /* --- Get stateManager --- */\n  const stateManager = scene.stateManager\n\n  /* --- Get canvas --- */\n  const canvas = scene.initialCanvas\n\n  const R = taskObject.R\n\n  scene.onResize = [function () { debuglog('scene.onResize: this is a custom function to be called on resize events') }]\n\n  /* --- Load assets --- */\n  // const sounds = {\n  //   observation: taskObject.cloneAssetIntoScene(R.get.sounds_observation, scene),\n  //   prediction: taskObject.cloneAssetIntoScene(R.get.sounds_predict, scene),\n  // }\n  // stateManager.setGlobal('sounds', sounds)\n\n\n  const adventurerTexture = taskObject.cloneAssetIntoScene(R.get.adventurer, scene)\n  adventurerTexture.hasAlpha = true\n\n  const adventurer = new BABYLON.Sprite2D(adventurerTexture, {\n    parent: canvas,\n    id: 'adventurer',\n    x: 100,\n    y: 100,\n    spriteSize: new BABYLON.Size(64, 64),\n    spriteLocation: new BABYLON.Vector2(0, 128),\n  })\n\n\n  const timerId = setInterval(() => {\n    if (canvas.isDisposed) {\n      clearInterval(timerId)\n      return\n    }\n    if (adventurer.spriteFrame === 21) {\n      adventurer.spriteFrame = 0\n    } else {\n      adventurer.spriteFrame += 1\n    }\n  }, 40)\n\n  adventurer.opacity = 0\n\n\n  /* --- Set some global variables --- */\n  // store in the stateManager a reference to the adventurer\n  stateManager.set('elements2D', { adventurer, canvas })\n\n  /* --- Register some global functions --- */\n  stateManager.register(addButton,\n    disposeOfButtons)\n\n  /* --- Setup data --- */\n  const dataManager = this.dataManager\n\n  /* --- Add mainSceneData table that will hold your scene data --- */\n  const dataFields = [\n    'id',\n    'subject_id',\n    'level',\n    'block',\n  ]\n\n  dataManager.addTable('mainSceneData', dataFields)\n\n  /* --- Add the logs for each level --- */\n  const eventFields = ['id', 'flag', 'happenedAt', 'handledAt', 'data']\n  dataManager.addTable('mainSceneEvents', eventFields)\n\n  /* --- Store scene level inside the stateManager --- */\n  stateManager.setGlobal('positionData', {\n    indexOnTransitionSequence: -1,\n    indexOnPredictionSequence: -1,\n    fullSequenceIndex: -1,\n  })\n\n  stateManager.setGlobal('hasSeenLearningInfo', false)\n  stateManager.setGlobal('hasSeenPredictionInfo', false)\n  /* --- Setup states --- */\n\n  /* --- Set state key and store them in the stateManager --- */\n  R.add({\n    states: {\n      running: 'running',\n      tutorial: 'tutorial',\n    },\n    flags: {\n      levelDefined: 'levelDefined',\n    },\n    events: {\n      goNextPosition: 'goNextPosition',\n      screenWentBlack: 'screenWentBlack',\n      playPredictionSound: 'playPredictionSound',\n      playObservationSound: 'playObservationSound',\n      showModal: 'showModal',\n      goToTutorial: 'goToTutorial',\n      restartTutorial: 'restartTutorial',\n      goTo3D: 'goTo3D',\n    },\n  })\n\n  /* --- Create the states --- */\n  // eslint-disable-next-line\n  const [tutorialState, runningState] = stateManager.addState(R.get.states_tutorial, R.get.states_running)\n  const pauseState = stateManager.states.pause\n\n  /* ======== State Active ======== */\n  const selectLevel = function () {\n    const stateManager = this.stateManager\n    const elements2D = stateManager.get('elements2D')\n    const GUI = stateManager.get('GUI') // this is a cavas on top of the main canvas that is made ot hold buttons, tooltips etc.\n\n    GUI.levelVisible = true\n    /* --- Delete buttons --- */\n    stateManager.promise('disposeOfButtons')\n\n    const eventButtonTutorialOne = new EventData(R.get.events_goToTutorial, stateManager.timeInMs, {\n      tutorial: 1,\n    })\n\n    const eventButton3D = new EventData(R.get.events_goTo3D, stateManager.timeInMs)\n\n    const width = 220\n    const height = 40\n    const widthOffset = width / 2\n\n    const buttonOptionLevelOne = {\n      id: 'ThreeD',\n      parent: GUI,\n      text: '3D Demo',\n      marginAlignment: 'h: center, v: bottom',\n      margin: {\n        rightPixels: (width) + widthOffset,\n        topPixels: 0,\n      },\n      width,\n      height,\n      fill: BABYLON.Canvas2D.GetSolidColorBrush(new BABYLON.Color4(0.8, 0.8, 0.8, 1)),\n      callbackFunction: null,\n      fontName: '20pt Arial',\n      baseOpacity: 0.8,\n      hoverOpacity: 1,\n      clickEventData: eventButton3D,\n    }\n\n    const buttonOptionTutorialOne = _.extend(_.clone(buttonOptionLevelOne), {\n      id: 'buttonTutorialLevelFour',\n      text: 'Tutorial 1',\n      margin: {\n        rightPixels: (width) + widthOffset,\n        bottomPixels: height,\n      },\n      clickEventData: eventButtonTutorialOne,\n    })\n\n\n    return Promise.all([\n      stateManager.promise('addButton', buttonOptionLevelOne),\n      stateManager.promise('addButton', buttonOptionTutorialOne),\n    ])\n      .then((buttons) => {\n        elements2D.levelButtons = buttons\n        if (buttons.constructor === BABYLON.Rectangle2D) { buttons = [buttons] }\n        for (const button of buttons) {\n          button.levelVisible = true\n        }\n        return 'stateManager.selectLevel: resolved'\n      })\n  }\n\n  stateManager.states.active.addAwakeningFunctions(selectLevel)\n\n  stateManager.states.active.addEventFunctions(R.get.events_goToTutorial,\n    ({ data: { tutorial } }) => {\n      stateManager.setGlobal('currentTutorial', tutorial)\n      stateManager.goToState(R.get.states_tutorial)\n    })\n\n  stateManager.states.active.addEventFunctions(R.get.events_goTo3D, () => { taskObject.currentScene = 'threeD' })\n\n  /* ======== State RUNNING ======== */\n\n  /* --- Register functions --- */\n  runningState.addAwakeningFunctions(startRunning)\n\n  runningState.addEventFunctions(R.get.events_goNextPosition, goToNextPosition)\n  runningState.addEventFunctions(R.get.events_click, checkForClickPrediction)\n\n  /* ======= State Tutorial ======= */\n  tutorialState.addAwakeningFunctions(awakeTutorial)\n\n  tutorialState.addEventFunctions(R.get.events_modalDismissed, showNextPage)\n  tutorialState.addEventFunctions(R.get.events_showModal, showModal)\n\n\n  /* ======== State Pause ======== */\n  stateManager.setPauseKeyStroke()\n  pauseState.addAwakeningFunctions(selectLevel)\n  pauseState.addEndingFunctions(function () { this.stateManager.promise('disposeOfButtons') })\n\n\n  return scene\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scenes/main/MainScene.js","import _ from 'lodash'\nimport BABYLON from 'experiment-babylon-js'\nimport {\n  EventData,\n  Array,\n  String, // eslint-disable-line\n} from 'experiment-js'\n\n\n/* --- Setup stateManager functions --- */\n\nconst addButton = function (options = null) {\n  if (typeof this.taskObject === 'undefined') {\n    throw new Error('stateManager.addButton: this.taskObject is undefined')\n  }\n\n  const stateManager = this.stateManager\n  const canvas = stateManager.get('elements2D').canvas\n\n  const baseOptions = {\n    id: `button${stateManager.timeInMs}`,\n    text: 'text',\n    x: 50,\n    y: 50,\n    width: 100,\n    height: 50,\n    fill: BABYLON.Canvas2D.GetSolidColorBrush(new BABYLON.Color4(0.8, 0.8, 0.8, 1)),\n    clickEventData: null,\n    fontName: '30pt Arial',\n    baseOpacity: 0.8,\n    hoverOpacity: 1,\n    zOrder: -0.5,\n    marginAlignment: null,\n    fontSignedDistanceField: true,\n    margin: {},\n    padding: {},\n    parent: canvas,\n  }\n\n  baseOptions.margin.leftPixels = 0\n  baseOptions.margin.rightPixels = 0\n  baseOptions.margin.topPixels = 0\n  baseOptions.margin.bottomPixels = 0\n  baseOptions.padding.leftPixels = 0\n  baseOptions.padding.rightPixels = 0\n  baseOptions.padding.topPixels = 0\n  baseOptions.padding.bottomPixels = 0\n  baseOptions.margin = _.extend(baseOptions.margin, options.margin)\n  baseOptions.padding = _.extend(baseOptions.padding, options.padding)\n  options.margin = baseOptions.margin\n  options.padding = baseOptions.padding\n\n  // extend options\n  options = _.extend(baseOptions, options)\n\n  let buttonOptions = {}\n  let margin = {}\n  let padding = {}\n  if (options.marginAlignment === null) {\n    buttonOptions = {\n      parent: options.parent,\n      id: options.id,\n      x: options.x,\n      y: options.y,\n      width: options.width,\n      height: options.height,\n      fill: options.fill,\n      zOrder: options.zOrder,\n      roundRadius: 0,\n      children: [new BABYLON.Text2D(options.text, {\n        fontName: options.fontName,\n        marginVAlignment: 'v: center',\n        fontSignedDistanceField: options.fontSignedDistanceField,\n        marginHAlignment: 3,\n      })],\n    }\n  } else {\n    buttonOptions = {\n      parent: options.parent,\n      id: options.id,\n      width: options.width,\n      height: options.height,\n      fill: options.fill,\n      zOrder: options.zOrder,\n      marginAlignment: options.marginAlignment,\n      roundRadius: 0,\n      children: [new BABYLON.Text2D(options.text, {\n        fontName: options.fontName,\n        marginVAlignment: 'v: center',\n        fontSignedDistanceField: options.fontSignedDistanceField,\n        marginHAlignment: 3,\n      })],\n    }\n    margin = options.margin\n    padding = options.padding\n  }\n\n  // create button and add to canvas\n  const buttonRect = new BABYLON.Rectangle2D(buttonOptions)\n\n  buttonRect.opacity = options.baseOpacity\n\n  if (margin !== null) {\n    buttonRect.margin.rightPixels = options.margin.rightPixels // TODO make that a specific function in the framework\n    buttonRect.margin.leftPixels = options.margin.leftPixels\n    buttonRect.margin.topPixels = options.margin.topPixels\n    buttonRect.margin.bottomPixels = options.margin.bottomPixels\n  }\n\n  if (padding !== null) {\n    buttonRect.padding.rightPixels = padding.rightPixels\n    buttonRect.padding.leftPixels = padding.leftPixels\n    buttonRect.padding.topPixels = padding.topPixels\n    buttonRect.padding.bottomPixels = padding.bottomPixels\n  }\n\n  // Add an observable for hovering\n  buttonRect.pointerEventObservable.add(() => {\n    buttonRect.opacity = options.hoverOpacity\n  }, BABYLON.PrimitivePointerInfo.PointerOver)\n\n  buttonRect.pointerEventObservable.add(() => {\n    buttonRect.opacity = options.baseOpacity\n  }, BABYLON.PrimitivePointerInfo.PointerOut)\n\n  // Add an observable for clicking\n  if ((options.clickEventData !== null) && (options.clickEventData.constructor === EventData)) {\n    buttonRect.pointerEventObservable.add(() => {\n      options.clickEventData.happenedAt = stateManager.timeInMs\n\n\n      stateManager.addEvent(options.clickEventData)\n    }, BABYLON.PrimitivePointerInfo.PointerUp)\n  }\n\n  return (buttonRect)\n}\n\nconst disposeOfButtons = function () {\n  const elements2D = this.stateManager.get('elements2D')\n\n  if (typeof elements2D.levelButtons !== 'undefined') {\n    if (elements2D.levelButtons.constructor === BABYLON.Rectangle2D) { elements2D.levelButtons = [elements2D.levelButtons] }\n    if (elements2D.levelButtons.constructor === Array) {\n      for (let i = 0; i < elements2D.levelButtons.length; i++) {\n        elements2D.levelButtons[i].dispose()\n      }\n      elements2D.levelButtons = []\n    }\n  }\n\n  return ('disposeOfButtons: buttons disposed.')\n}\n\nexport {\n  addButton,\n  disposeOfButtons }\n\n\n\n// WEBPACK FOOTER //\n// ./src/scenes/main/functions/globalFunctions.js","import _ from 'lodash'\nimport BABYLON from 'experiment-babylon-js'\nimport {\n  EventData,\n  Array, // eslint-disable-line\n  String, // eslint-disable-line\n  mandatory,\n  debugError,\n} from 'experiment-js'\n\n  /* --- State function --- */\n\nconst startRunning = function () {\n  // in those functions called by the stateManager :\n  // this = taskObject.context\n  // You can access all the relevant object with this.(taskObject, scene, stateManager, state, R)\n  const stateManager = this.stateManager\n  const R = stateManager.R\n\n  /* --- Store the data --- */\n  // Prepare the first 'goToNextPosition' event\n  const nextTransitionTime = this.stateManager.timeInMs + 100 // this event will fire at a later time\n  const nextTransitionEvent = new EventData(R.get.events_goNextPosition, nextTransitionTime, {\n    belongsTo: ['globalLog'], // tables to store the event in\n    handledAt: null,\n    storedAt: null,\n  })\n\n  // Add the future event to the pile of time triggered event\n  stateManager.addTimeTriggerEvent(nextTransitionEvent)\n\n  return ('state.startRunning: resolved')\n}\n\nconst goToNextPosition = function () {\n  const stateManager = this.stateManager\n  const elements2D = stateManager.get('elements2D')\n\n  elements2D.adventurer.opacity = 1\n\n  elements2D.adventurer.x = _.random(50, this.taskObject.renderSize.width)\n  elements2D.adventurer.y = _.random(50, this.taskObject.renderSize.height)\n\n  return 'Changed position'\n}\n\n\nconst checkForClickPrediction = function (event = mandatory()) {\n  if (typeof event.data.clientY === 'undefined') {\n    debugError('state.checkForClickPrediction: event.data.clientY is undefined.')\n    return null\n  }\n\n  const stateManager = this.stateManager\n  const clickVector = new BABYLON.Vector2(event.data.engineX, event.data.engineY)\n\n  const elements2D = stateManager.get('elements2D')\n  const canvasPosition = elements2D.canvas.actualPosition\n\n  const isAOverB = function (positionA, positionB, sizeB) {\n    if (BABYLON.Vector2.DistanceSquared(positionA, positionB) < sizeB.lengthSquared()) {\n      return true\n    }\n    return false\n  }\n\n  const adventurer = elements2D.adventurer\n    // var sizeVector = (new BABYLON.Vector2(agent.size.width, agent.size.height)).scaleInPlace(agent.scale);\n  const sizeVector = new BABYLON.Vector2(adventurer.width, adventurer.height)\n  sizeVector.scaleInPlace(0.5)\n\n  if (isAOverB(clickVector, ((adventurer.actualPosition).add(sizeVector)).add(canvasPosition), sizeVector)) {\n    // Add an immediate event to the pile of event that will be treated at the next update\n    stateManager.newEvent(this.R.get.events_goNextPosition)\n  }\n  return 'checkForClickPrediction resolved'\n}\n\nexport {\n  startRunning,\n  goToNextPosition,\n  checkForClickPrediction,\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scenes/main/states/running.js","import {\n  EventData,\n  Array, // eslint-disable-line\n  String, // eslint-disable-line\n  delay, debugWarn, debuglog, debugError,\n} from 'experiment-js'\n\n\n// You are not forced to use the Ressourcemanager or the state globals\nconst intro = {\n  title: { en: 'This is the tutorial state' },\n  content: {\n    en: `\n    <h5>Welcome !   </h5>\n    This is a SmartModal, from the experiment-boxes module. Shift+P would show you the ParamBox<br>\n    If you click the button below, an \"modal_dismissed\" event will fire and trigger the next modal to appear<br><br>`,\n  },\n}\n\nconst disclaimer = {\n  title: { en: '' },\n  content: {\n    en: `How fun is that !<br>\n  Let's do another one  `,\n  },\n}\n\nconst trialInstruction = {\n  title: { en: 'There is no small examples' },\n  content: { en: `<h5>Time to act</h5>\n    Try clicking on the little adventurer !<br>\n    Check in your console the logs. \n    <br>` },\n}\nconst tutorials = {\n  disclaimer,\n  intro,\n  trialInstruction,\n}\n\nconst pageOrderTutorialOne = ['intro', 'disclaimer', 'trialInstruction']\n\nconst awakeTutorial = function () {\n  this.stateManager.set('currentPage', 'intro')\n  this.stateManager.call('disposeOfButtons')\n  const showIntro = new EventData(this.R.get.events_showModal, this.stateManager.timeInMs + 100, { page: 'intro' })\n  this.stateManager.addTimeTriggerEvent(showIntro)\n}\n\nconst showModal = function ({ data: { page = 'intro' } }) {\n  if (this.taskObject.currentModal !== null) {\n    try {\n      this.taskObject.currentModal.modalBox.destroy()\n    } catch (e) {\n      debugWarn(e)\n    }\n  }\n\n  // Sometimes modals and divs need some time to place themselves in the DOM, those short delay allow for it\n  // TODO hopefully this will get fixed in future version\n  delay(50).then(() => {\n    if (tutorials.hasOwnProperty(page)) {\n      const tutorial = tutorials[page]\n      const event = new EventData(this.R.get.events_modalDismissed, { page })\n      this.taskObject.modal({ type: 'centralLarge', title: tutorial.title.en, content: tutorial.content.en, event })\n    }\n  })\n}\n\nconst showNextPage = function ({ data: { page: currentPage = this.stateManager.get('currentPage', 'intro') } }) {\n  const pageOrder = pageOrderTutorialOne\n\n  const currentIndex = pageOrder.indexOf(currentPage)\n  if (currentIndex !== -1) {\n    if (currentIndex !== pageOrder.length - 1) {\n      const showEvent = new EventData(this.R.get.events_showModal, { page: pageOrder[currentIndex + 1] })\n      this.stateManager.addEvent(showEvent)\n    } else {\n      debuglog('state.showNextPage: end of tutorial.')\n      this.stateManager.goToState(this.R.get.states_running, true)\n    }\n  } else {\n    debugError('state.showNextPage: invalid currentPage.')\n  }\n}\n\n\nexport {\nawakeTutorial,\nshowNextPage,\nshowModal }\n\n\n\n// WEBPACK FOOTER //\n// ./src/scenes/main/states/tutorial.js","import _ from 'lodash'\nimport BABYLON from 'experiment-babylon-js'\nimport {\n  Array, // eslint-disable-line\n  String, // eslint-disable-line\n} from 'experiment-js'\n\n\n/* =============== Main scene =============== */\nexport default function ThreeDScene(options = {}) {\n  // option base\n  const optionsBase = {\n    sceneKey: 'threeD',\n    clearColor: new BABYLON.Color4(0, 0, 0, 1),\n  }\n\n  options = _.extend(optionsBase, options)\n\n  /* --- Get taskObject from context --- */\n  const taskObject = this.taskObject\n\n  const scene = new BABYLON.Scene(taskObject.engine)\n\n  /**\n     * Holds the scenekey inside the scene object.\n     * @type {string}\n     */\n  scene.sceneKey = options.sceneKey\n\n    /**\n     * Reference to the parent taskObject\n     * @type {TaskObject}\n     */\n  scene.parentTaskObject = this\n\n    /* --- Add a stateManager --- */\n  taskObject.addStateManager(scene)\n\n  scene.updateContentFrame = () => {}\n\n    /**\n     * Custom resize functions called by updateContentFrame. Can be set by the user\n     * to perform scene updates on resize. Can be an array of function or a single function.\n     * @type {!function|array}\n     */\n  scene.onResize = null\n\n    /* Scene update */\n  scene.registerBeforeRender(() => {\n    scene.stateManager.update()\n  })\n\n\n    // This creates and positions a free camera (non-mesh)\n  const camera = new BABYLON.ArcRotateCamera('camera1', 0, 1.05, 25, new BABYLON.Vector3(0, 0, 0), scene)\n  camera.setTarget(BABYLON.Vector3.Zero())\n  camera.lowerRadiusLimit = 5\n  camera.upperRadiusLimit = 80\n  camera.upperBetaLimit = Math.PI / 2\n  camera.attachControl(taskObject.canvas, true)\n  scene.initialCamera = camera\n\n    // This creates a light, aiming 0,1,0 - to the sky (non-mesh)\n  const light = new BABYLON.PointLight('light1', new BABYLON.Vector3(0, -1, 0), scene)\n  light.position = new BABYLON.Vector3(-3, 5, -3) // only Y is not updated in render\n  light.intensity = 0.95\n  light.diffuse = new BABYLON.Color3(1, 0, 0)\n  light.specular = new BABYLON.Color3(1, 1, 1)\n\n  const lightSphere = BABYLON.Mesh.CreateSphere('sphere1', 30, 0.5, scene)\n  const litMaterial = new BABYLON.StandardMaterial('litMat', this.scene)\n  litMaterial.emissiveColor = BABYLON.Color3.FromInts(255, 300, 150)\n  lightSphere.material = litMaterial\n\n\n    // Lights\n  const light0 = new BABYLON.PointLight('light5', new BABYLON.Vector3(0, -1, 0), scene)\n  const light1 = new BABYLON.PointLight('Omni1', new BABYLON.Vector3(0, -1, 0), scene)\n  const light2 = new BABYLON.PointLight('Omni2', new BABYLON.Vector3(0, -1, 0), scene)\n  const light3 = new BABYLON.PointLight('Dir0', new BABYLON.Vector3(0, -1, 0), scene)\n  const light4 = new BABYLON.PointLight('Omni3', new BABYLON.Vector3(0, -1, 0), scene)\n  const light5 = new BABYLON.PointLight('Omni4', new BABYLON.Vector3(0, -1, 0), scene)\n\n    // Creating light sphere\n  const lightSphere0 = BABYLON.Mesh.CreateSphere('Sphere0', 16, 0.5, scene)\n  const lightSphere1 = BABYLON.Mesh.CreateSphere('Sphere1', 16, 0.5, scene)\n  const lightSphere2 = BABYLON.Mesh.CreateSphere('Sphere2', 16, 0.5, scene)\n  const lightSphere4 = BABYLON.Mesh.CreateSphere('Sphere4', 16, 0.5, scene)\n  const lightSphere5 = BABYLON.Mesh.CreateSphere('Sphere5', 16, 0.5, scene)\n\n  lightSphere0.material = new BABYLON.StandardMaterial('red', scene)\n    // lightSphere0.material.diffuseColor = new BABYLON.Color3(0, 0, 0);\n    // lightSphere0.material.specularColor = new BABYLON.Color3(0, 0, 0);\n  lightSphere0.material.emissiveColor = new BABYLON.Color3(1, 0, 0)\n  light0.intensity = 0.95\n\n  lightSphere1.material = new BABYLON.StandardMaterial('green', scene)\n  lightSphere1.material.diffuseColor = new BABYLON.Color3(0, 1, 0)\n  lightSphere1.material.specularColor = new BABYLON.Color3(0, 1, 0)\n  lightSphere1.material.emissiveColor = new BABYLON.Color3(0, 1, 0)\n\n  lightSphere2.material = new BABYLON.StandardMaterial('blue', scene)\n  lightSphere2.material.diffuseColor = new BABYLON.Color3(0, 0, 1)\n  lightSphere2.material.specularColor = new BABYLON.Color3(0, 0, 0)\n  lightSphere2.material.emissiveColor = new BABYLON.Color3(0, 0, 1)\n\n  lightSphere4.material = new BABYLON.StandardMaterial('blue', scene)\n  lightSphere4.material.diffuseColor = new BABYLON.Color3(0, 0, 0)\n  lightSphere4.material.specularColor = new BABYLON.Color3(0, 0, 0)\n  lightSphere4.material.emissiveColor = new BABYLON.Color3(1, 1, 0)\n\n  lightSphere5.material = new BABYLON.StandardMaterial('blue', scene)\n  lightSphere5.material.diffuseColor = new BABYLON.Color3(0, 0, 0)\n  lightSphere5.material.specularColor = new BABYLON.Color3(0, 0, 0)\n  lightSphere5.material.emissiveColor = new BABYLON.Color3(0, 1, 1)\n\n\n    // Lights colors\n  light0.diffuse = new BABYLON.Color3(1, 0, 0)\n  light0.specular = new BABYLON.Color3(1, 0, 0)\n\n  light1.diffuse = new BABYLON.Color3(0, 1, 0)\n  light1.specular = new BABYLON.Color3(0, 1, 0)\n\n  light2.diffuse = new BABYLON.Color3(0, 0, 1)\n  light2.specular = new BABYLON.Color3(0, 0, 1)\n\n  light3.diffuse = new BABYLON.Color3(1, 1, 1)\n  light3.specular = new BABYLON.Color3(1, 1, 1)\n\n  light4.diffuse = new BABYLON.Color3(1, 1, 0)\n  light4.specular = new BABYLON.Color3(1, 1, 0)\n\n  light5.diffuse = new BABYLON.Color3(0, 1, 1)\n  light5.specular = new BABYLON.Color3(0, 1, 1)\n\n\n    // Our built-in 'sphere' shape. Params: name, subdivs, size, scene\n  const sphere = BABYLON.Mesh.CreateSphere('sphere1', 150, 2, scene)\n  sphere.position.y = 1\n\n  const sphere2 = BABYLON.Mesh.CreateSphere('sphere2', 150, 2, scene)\n  sphere2.position.y = 1\n  sphere2.position.z = 3\n\n    // Our built-in 'ground' shape. Params: name, width, depth, subdivs, scene\n  const ground = BABYLON.Mesh.CreateGround('ground1', 60, 60, 2, scene)\n\n  const shadowGenerator = new BABYLON.ShadowGenerator(1024, light)\n  light.shadowMinZ = 1\n  light.shadowMaxZ = 2500\n  shadowGenerator.depthScale = 2500\n  shadowGenerator.bias = 0.001\n  shadowGenerator.getShadowMap().renderList.push(sphere)\n  shadowGenerator.getShadowMap().renderList.push(sphere2)\n  shadowGenerator.getShadowMap().refreshRate = 1\n  shadowGenerator.forceBackFacesOnly = true\n\n  const shadowGenerator2 = new BABYLON.ShadowGenerator(1024, light0)\n  shadowGenerator2.bias = 0.001\n  shadowGenerator2.getShadowMap().renderList.push(sphere)\n  shadowGenerator2.getShadowMap().renderList.push(sphere2)\n  shadowGenerator2.getShadowMap().refreshRate = 1\n  shadowGenerator2.forceBackFacesOnly = true\n\n\n  ground.receiveShadows = true\n  const matt = new BABYLON.StandardMaterial('texture1', scene)\n  matt.maxSimultaneousLights = 16\n  matt.specularPower = 10000\n  matt.backFaceCulling = false\n  ground.material = matt\n  ground.position.y = -1\n\n  scene.clearColor = new BABYLON.Color4(0.5, 0.8, 1, 1)\n\n    // Animations\n  let alpha = 0\n  let radiansFromCameraForShadows = -3 * (Math.PI / 4)\n  let beta = 0\n\n  scene.beforeRender = function () {\n        // light rotates with ground\n    light.position.x = Math.cos(camera.alpha + radiansFromCameraForShadows) * 2\n    light.position.z = Math.sin(camera.alpha + radiansFromCameraForShadows) * 2\n    radiansFromCameraForShadows += 0.015\n    lightSphere.position.copyFrom(light.position)\n\n    light0.position = new BABYLON.Vector3(10 * Math.sin(alpha), 0, 10 * Math.cos(alpha))\n    light1.position = new BABYLON.Vector3(10 * Math.sin(alpha), 0, -10 * Math.cos(alpha))\n    light2.position = new BABYLON.Vector3(10 * Math.cos(alpha), 0, 10 * Math.sin(alpha))\n    light4.position = new BABYLON.Vector3(10 * Math.cos(alpha), 10 * Math.sin(alpha), 0)\n    light5.position = new BABYLON.Vector3(10 * Math.sin(alpha), -10 * Math.cos(alpha), 0)\n\n    light0.intensity = 0.5 + (Math.cos(beta * 0.9) * 0.5)\n    light1.intensity = 0.5 + (Math.cos(beta * 0.8) * 0.5)\n    light2.intensity = 0.5 + (Math.cos(beta * 1.1) * 0.5)\n    light3.intensity = 0.5 + (Math.cos(beta * 1.2) * 0.5)\n\n\n    lightSphere0.position = light0.position\n    lightSphere1.position = light1.position\n    lightSphere2.position = light2.position\n    lightSphere4.position = light4.position\n    lightSphere5.position = light5.position\n\n    alpha += 0.01\n    beta += 0.1\n  }\n\n  return scene\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scenes/threeD/ThreeDScene.js","module.exports = __WEBPACK_EXTERNAL_MODULE_10__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"jQuery\",\"commonjs2\":\"jQuery\",\"amd\":\"jQuery\",\"root\":\"jQuery\"}\n// module id = 10\n// module chunks = 0"],"sourceRoot":""}